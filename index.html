<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Japon - Un Voyage d'Espoir</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Styles de base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            color: #2c3e50;
            background-color: #f7f7f7;
        }

        /* Hero Section */
        .hero {
            height: 50vh;
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./HERO.jpg');
            background-size: cover;
            background-position: center top;
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding: 0 20px;
        }

        .hero h1 {
            font-size: 4em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-weight: 700;
        }

        .hero p {
            font-size: 1.5em;
            max-width: 800px;
            margin-bottom: 30px;
        }

        /* Language Switcher */
        #language-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        #language-switch button {
            margin: 0 5px;
            padding: 8px 15px;
            border: none;
            background-color: rgba(255,255,255,0.9);
            color: #2c3e50;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        #language-switch button:hover {
            background-color: #fff;
            transform: translateY(-2px);
        }

        /* Content Sections */
        .content-section {
            max-width: 1200px;
            margin: 100px auto;
            padding: 0 20px;
        }

        .story-block {
            display: flex;
            align-items: center;
            margin-bottom: 100px;
            gap: 50px;
        }

        .story-block:nth-child(even) {
            flex-direction: row-reverse;
        }

        .story-text {
            flex: 1;
        }

        .story-image {
            flex: 1;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .story-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.3s ease;
        }

        .story-image:hover img {
            transform: scale(1.05);
        }

        h2 {
            color: #34495e;
            font-size: 2.5em;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .story-text p {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #555;
        }

        /* Statistics Section */
        .stats {
            background-color: #34495e;
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .stats-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .stat-item {
            margin: 20px;
            flex: 1;
            min-width: 200px;
        }

        .stat-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        /* Donation Form Section */
        #donation-form {
            background-color: white;
            padding: 60px 20px;
            /*margin-top: 100px;*/
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Existing form styles... */
        form {
            display: flex;
            flex-direction: column;
        }

        form label {
            margin-bottom: 5px;
            color: #34495e;
        }

        form input, form select {
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            font-size: 1em;
        }

        form button {
            padding: 15px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        form button:hover {
            background-color: #c0392b;
        }

        /* Footer */
        footer {
            background-color: #2c3e50;
            color: white;
            padding: 40px 20px;
            text-align: center;
        }

        footer a {
            color: #e74c3c;
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 2px 5px;
            border-radius: 3px;
        }

        footer a:hover {
            color: #fff;
            background-color: #e74c3c;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5em;
            }

            .hero p {
                font-size: 1.2em;
            }

            .story-block {
                flex-direction: column !important;
                text-align: center;
            }

            .story-image {
                margin: 20px 0;
            }

            .stats-container {
                flex-direction: column;
            }

            .stat-item {
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div id="language-switch">
        <button onclick="setLanguage('fr')">Français</button>
        <button onclick="setLanguage('en')">English</button>
        <button onclick="setLanguage('cn')">广东话</button>
        <button onclick="setLanguage('jp')">日本語</button>
    </div>

    <section class="hero">
        <h1 id="main-title">Mission Japon</h1>
        <p id="hero-subtitle">Un voyage d'espoir et de partage au cœur du Japon</p>
    </section>

    <main>
        <section class="content-section">
            <div class="story-block">
                <div class="story-text">
                    <h2 id="vision-title">Qui sommes-nous ?</h2>
                    <p id="vision-text"></p>
                </div>
                <div class="story-image">
                    <img src="section1.jpg" alt="Notre vision pour le Japon">
                </div>
            </div>

            <div class="story-block">
                <div class="story-text">
                    <h2 id="journey-title">Comment avons-nous été appelés à la mission ?</h2>
                    <p id="journey-text"></p>
                </div>
                <div class="story-image">
                    <img src="section2.jpg" alt="Notre parcours">
                </div>
            </div>

            <div class="story-block">
                <div class="story-text">
                    <h2 id="impact-title">Qu'allons-nous faire au Japon ?</h2>
                    <p id="impact-text"></p>
                </div>
                <div class="story-image">
                    <img src="section3.jpg" alt="Notre impact au Japon">
                </div>
            </div>
        </section>

        <section class="stats">
            <div class="stats-container">
                <div class="stat-item">
                    <div class="stat-number">1%</div>
                    <div id="stat1-text">de chrétiens au Japon</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">126M</div>
                    <div id="stat2-text">d'habitants</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">2024</div>
                    <div id="stat3-text">début de la mission</div>
                </div>
            </div>
        </section>

        <section id="donation-form">
            <div class="form-container">
                <h2 id="form-title"></h2>
                <form id="donForm">
                    <label id="label-name" for="name"></label>
                    <input type="text" id="name" name="name" required>
                    
                    <label id="label-firstname" for="firstname"></label>
                    <input type="text" id="firstname" name="firstname" required>
                    
                    <label id="label-contact" for="contact"></label>
                    <input type="text" id="contact" name="contact" required>
                    
                    <label id="label-amount" for="amount"></label>
                    <input type="number" id="amount" name="amount" required>
                    
                    <label id="label-type" for="type"></label>
                    <select id="type" name="type" required></select>
                    
                    <label id="label-duration" for="duration"></label>
                    <select id="duration" name="duration"></select>
                    
                    <button type="button" id="submit-btn" onclick="handleSubmit()"></button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <p id="footer-text">© 2024 Neuchatech. Pour vos développements web, <a href="https://www.neuchatech.ch" target="_blank">visitez www.neuchatech.ch</a></p>
    </footer>

    <script>
        // Move these declarations to the top, before they're used
        let successMessage;
        let errorMessage;

        // Mise à jour des traductions
        const translations = {
            fr: {
                mainTitle: "Mission Japon",
                heroSubtitle: "Un voyage d'espoir et de partage au cœur du Japon",
                visionTitle: "Qui sommes-nous ?",
                visionText: "Nous, Quentin de Suisse et Hannah de Hong Kong, nous sommes rencontrés à l'école de disciples de JEM (Jeunesse en Mission) au début de l'année 2024. Nous étions à Rogaland, une région en Norvège. Dès le début, nous nous sommes liés d'amitié avec une autre fille brésilienne et nous avons appris à nous connaître, nous avons eu beaucoup de belles conversations profondes et à partager nos visions respectives. Pendant cette période nous sommes devenus meilleurs amis. Après l'école, nous avons commencé à nous fréquenter et nous allons nous marier en janvier et février 2025 dans nos pays respectifs.",
                journeyTitle: "Comment avons-nous été appelés à la mission ?",
                journeyText: "Nous avions tous les deux un appel pour l'Asie avant de nous rencontrer. Dieu nous a appelés à travers des prières et des rêves, en particulier pour Oita, Dieu a donné une vision à Quentin en lui montrant la carte du Japon et le nom de la ville d'Oita. Nous croyons que Dieu a toujours un plan pour chaque étape et nous sommes ouverts à tout nouveau plan de Dieu. Nous sommes vraiment bénis que Dieu nous ait montré la première étape en tant que missionnaires allant à Oita.",
                impactTitle: "Qu'allons-nous faire au Japon ?",
                impactText: "La base de JEM à Oita fait du ministère sur le campus de l'université, du ministère artistique, de la gestion d'une école pour enfants et la première école de disciples commencera en avril 2025. Il y a de nombreuses opportunités de servir et d'atteindre les habitants. Au début, nous nous efforcerons de nous installer dans la ville, de connaître et de servir le personnel de la base. Ce serait un plaisir si nous pouvions également aider l'école de disciples à venir ! Nous avons eu deux appels vidéo avec le personnel de la base, nous nous sommes sentis très bien accueillis et ils ont également mentionné que nous aurions de nombreuses occasions d'essayer différents ministères. Nous allons donc en savoir plus sur nos dons et sur ce que Dieu nous appelle et nous met au défi d'essayer. C'est un voyage passionnant !",
                stat1Text: "de chrétiens au Japon",
                stat2Text: "d'habitants",
                stat3Text: "début de la mission",
                formTitle: "Soutenez notre mission",
                form: {
                    title: "Soutenez notre mission",
                    labels: {
                        name: "Nom",
                        firstname: "Prénom",
                        contact: "E-mail ou N° de tél",
                        amount: "Montant (CHF)",
                        type: "Type de don",
                        duration: "Durée",
                        submit: "Envoyer"
                    },
                    options: {
                        type: [
                            { value: "mensuel", text: "Mensuel" },
                            { value: "ponctuel", text: "Ponctuel" }
                        ],
                        duration: [
                            { value: "3mois", text: "3 mois" },
                            { value: "6mois", text: "6 mois" },
                            { value: "1an", text: "1 an" },
                            { value: "2ans", text: "2 ans" }
                        ]
                    },
                    messages: {
                        success: "Merci pour votre promesse de don !",
                        error: "Erreur lors de l'envoi du formulaire, merci de réessayer."
                    }
                }
            },
            en: {
                mainTitle: "Japan Mission",
                heroSubtitle: "A journey of hope and sharing in the heart of Japan",
                visionTitle: "Who we are?",
                visionText: "We, Quentin from Switzerland and Hannah from Hong Kong, met in YWAM (Youth With A Mission) Backpack DTS in the start of 2024. It was the time that we had our DTS (Discipleship Training School) in Rogaland, a city in Norway. We became close friends from the very beginning with another Brazilian girl. At that time we got to know each other and shared our visions, we enjoyed the deep conversations a lot and we became best friends. After DTS, we started dating and are going to marry in January and February 2025 in our countries.",
                journeyTitle: "How we got called to missions?",
                journeyText: "We both had callings for Asia before we met each other. God called us through prayers and dreams, specially for Oita, God gave a vision to Quentin to see the map of Japan and the name of the city Oita. We believe God always has a plan for each step and we are open for every new plan from God. We are truly blessed that God showed us the first step as missionaries going to Oita.",
                impactTitle: "What are we going to do in Japan?",
                impactText: "The YWAM base in Oita is doing campus ministry, arts ministry, running a school for kids and also the first DTS will start in April 2025. There are many opportunities to serve and reach the locals. In the beginning, we will focus on settling down in the city, knowing and serving the base staff. It will be a pleasure if we can help for the coming DTS too! We had two video calls with the base staff, we felt so welcomed and they also mentioned that we will have many chances to try different ministries. So we are going to know more about our gifts and what God calls us and challenge us to try. Such an exciting journey!",
                stat1Text: "Christians in Japan",
                stat2Text: "inhabitants",
                stat3Text: "mission start",
                formTitle: "Support our mission",
                form: {
                    title: "Support our mission",
                    labels: {
                        name: "Last Name",
                        firstname: "First Name",
                        contact: "Email or Phone",
                        amount: "Amount (CHF)",
                        type: "Donation Type",
                        duration: "Duration",
                        submit: "Submit"
                    },
                    options: {
                        type: [
                            { value: "mensuel", text: "Monthly" },
                            { value: "ponctuel", text: "One-time" }
                        ],
                        duration: [
                            { value: "3mois", text: "3 months" },
                            { value: "6mois", text: "6 months" },
                            { value: "1an", text: "1 year" },
                            { value: "2ans", text: "2 years" }
                        ]
                    },
                    messages: {
                        success: "Thank you for your donation pledge!",
                        error: "Error submitting the form, please try again."
                    }
                }
            },
            cn: {
                mainTitle: "日本宣教",
                heroSubtitle: "在日带的望分之",
                visionTitle: "關於我們",
                visionText: "我們是瑞士香港夫婦，2024年一月在挪威認識，當時我們一起參與了YWAM (青年使命團)舉辦的 DTS (Discipleship Training School, 門徒訓練學校)。當初我們都因為不太敢講英文變得親近，同時還有一個巴西的女生，我們成為了互相分享生命故事、呼召的好朋友。在DTS裡面，我們一通經歷醫治、被更新、認識自己，讓我們在無數次的深入會話中更多認識對方，也看見天父有美好的旨意在我們當中。DTS結束之後，我們開始交往，並決定在2025年一、二月於瑞士和香港舉辦婚禮。",
                journeyTitle: "���們的呼召",
                journeyText: "我們同時都對亞洲有負擔，神分別透過禱告和意象堅立我們的信心。特別是祂透過夢境向Quentin展現日本的地圖和Oita大分縣這個名字，並且領我們到日本，以此為開始，使用我們將福音帶到未得之民。我們相信神有美好的計劃，以後也一步一步帶領我們宣教的旅程。祂是信實的神，必定會指引我們在大分縣接觸更多需要渴望福音、需要愛的靈魂。",
                impactTitle: "我們的服侍",
                impactText: "大分縣的YWAM base一直有各種服侍，包括：小學課程及課外、大學生小組、藝術服侍社區，並且會在2025年四月舉辦第一次DTS，我們非常期待看見更多的年輕人被神觸摸。我們將會配合base的發展，參與不同類型的服侍，不論是對外、對內的，我們都期望能夠發揮神給我倆不同的恩賜和才幹，在多方面為祂作工。預計在抵達大分縣的初期，我們會專注認識社區環境，同時支持正在籌備DTS的同工。",
                stat1Text: "日本的基督徒",
                stat2Text: "人口",
                stat3Text: "使命开始",
                formTitle: "支持我们的使命",
                form: {
                    title: "支持我们的使命",
                    labels: {
                        name: "姓",
                        firstname: "名",
                        contact: "电子邮件或电话",
                        amount: "金额 (CHF)",
                        type: "捐赠类型",
                        duration: "期限",
                        submit: "提交"
                    },
                    options: {
                        type: [
                            { value: "mensuel", text: "每月" },
                            { value: "ponctuel", text: "一次性" }
                        ],
                        duration: [
                            { value: "3mois", text: "3个月" },
                            { value: "6mois", text: "6个月" },
                            { value: "1an", text: "1年" },
                            { value: "2ans", text: "2年" }
                        ]
                    },
                    messages: {
                        success: "感谢您的捐赠承诺！",
                        error: "提交表单时出错，请重试。"
                    }
                }
            },
            jp: {
                mainTitle: "日本宣教",
                heroSubtitle: "日本の中心での希望と分かち合いの旅",
                visionTitle: "私たちについて",
                visionText: "私たちの使命の中心には深いビジョンがあります：文化間の架け橋を築き、希望のメッセージを分かち合うことです。千年の伝を持つ日本は、独特の精神的・社会的課題に直面しています。私たちの召命は、思いやりのある存と誠実な証しをもたらすことです。",
                journeyTitle: "宣教への召命",
                journeyText: "私たちの物語は数年前、人生を変えた最初の日本訪問から始まりました。それ以来、私たちは言語学習、神学訓練、文化的没入など、集中的な準備を重ねてきました。それぞれのステップが、日本への独特の召命を確認するものでした。",
                impactTitle: "日本での私たちの働き",
                impactText: "大分のYWAMベースでは、キャンパスミニストリー、アートミニストリー、子供向けの学校運営を行っており、2025年4月には最初のDTSが始まります。地域の人々に仕え、関わる機会が多くあります。最初は、市内での生活を整え、ベーススタッフを知り、仕えることに焦点を当てます。来るDTSのお手伝いができれば嬉しいです！ベーススタッフとのビデオ通話を2回行い、とても歓迎されていると感じ、また様々なミニストリーを試す機会があると言及されました。そのため、私たちの賜物と神様が私たちを召し、挑戦させようとしていることについてより深く知ることができます。なんと素晴らしい旅でしょう！",
                stat1Text: "日本のクリスチャン",
                stat2Text: "人口",
                stat3Text: "宣教開始",
                formTitle: "私たちの使命を支援する",
                form: {
                    title: "私たちの使命を支援する",
                    labels: {
                        name: "姓",
                        firstname: "名",
                        contact: "メールまたは電話番号",
                        amount: "金額 (CHF)",
                        type: "寄付タイプ",
                        duration: "期間",
                        submit: "送信"
                    },
                    options: {
                        type: [
                            { value: "mensuel", text: "毎月" },
                            { value: "ponctuel", text: "一回限り" }
                        ],
                        duration: [
                            { value: "3mois", text: "3ヶ月" },
                            { value: "6mois", text: "6ヶ月" },
                            { value: "1an", text: "1年" },
                            { value: "2ans", text: "2年" }
                        ]
                    },
                    messages: {
                        success: "ご寄付の誓約ありがとうございます！",
                        error: "フォームの送信中にエラーが発生しました。もう一度お試しください。"
                    }
                }
            }
        };

        // Après la déclaration des traductions, ajouter les valeurs par défaut
        const DEFAULT_TYPE = "mensuel";
        const DEFAULT_DURATION = "2ans";
        let lastDurationValue = DEFAULT_DURATION; // Pour mémoriser la dernière valeur de durée

        // Gestionnaire pour le champ type de don
        document.getElementById("type").addEventListener("change", function(e) {
            const durationSelect = document.getElementById("duration");
            const durationLabel = document.getElementById("label-duration");
            
            if (e.target.value === "ponctuel") {
                durationSelect.disabled = true;
                durationSelect.value = ""; // Réinitialiser la valeur
                durationLabel.style.opacity = "0.5";
            } else {
                durationSelect.disabled = false;
                durationLabel.style.opacity = "1";
                durationSelect.value = lastDurationValue; // Restaurer la dernière valeur
            }
        });

        // Dans la fonction setLanguage, après avoir rempli les options des select
        function setLanguage(lang) {
            const langData = translations[lang];
            
            document.getElementById("main-title").textContent = langData.mainTitle;
            document.getElementById("hero-subtitle").textContent = langData.heroSubtitle;
            document.getElementById("vision-title").textContent = langData.visionTitle;
            document.getElementById("vision-text").textContent = langData.visionText;
            document.getElementById("journey-title").textContent = langData.journeyTitle;
            document.getElementById("journey-text").textContent = langData.journeyText;
            document.getElementById("impact-title").textContent = langData.impactTitle;
            document.getElementById("impact-text").textContent = langData.impactText;
            document.getElementById("stat1-text").textContent = langData.stat1Text;
            document.getElementById("stat2-text").textContent = langData.stat2Text;
            document.getElementById("stat3-text").textContent = langData.stat3Text;
            
            // Formulaire
            document.getElementById("form-title").textContent = langData.form.title;
            
            // Labels du formulaire et bouton
            Object.keys(langData.form.labels).forEach(label => {
                const element = document.getElementById(`label-${label}`);
                if (element) element.textContent = langData.form.labels[label];
            });
            
            // Bouton de soumission
            document.getElementById("submit-btn").textContent = langData.form.labels.submit;
            
            // Sauvegarder les valeurs actuelles des selects
            const currentType = document.getElementById("type").value || DEFAULT_TYPE;
            const currentDuration = document.getElementById("duration").value;
            if (currentDuration) {
                lastDurationValue = currentDuration;
            }
            
            // Options des select
            ['type', 'duration'].forEach(selectId => {
                const select = document.getElementById(selectId);
                select.innerHTML = '';
                langData.form.options[selectId].forEach(option => {
                    const opt = document.createElement("option");
                    opt.value = option.value;
                    opt.textContent = option.text;
                    select.appendChild(opt);
                });
            });
            
            // Restaurer les valeurs
            const typeSelect = document.getElementById("type");
            const durationSelect = document.getElementById("duration");
            const durationLabel = document.getElementById("label-duration");
            
            // Définir les valeurs par défaut si nécessaire
            typeSelect.value = currentType;
            if (typeSelect.value === "ponctuel") {
                durationSelect.disabled = true;
                durationLabel.style.opacity = "0.5";
                durationSelect.value = "";
            } else {
                durationSelect.disabled = false;
                durationLabel.style.opacity = "1";
                durationSelect.value = currentDuration || lastDurationValue;
            }

            // Update messages
            successMessage = langData.form.messages.success;
            errorMessage = langData.form.messages.error;

            // Vérifier l'état initial du champ duration après avoir rempli les options
            typeSelect = document.getElementById("type");
            durationSelect = document.getElementById("duration");
            durationLabel = document.getElementById("label-duration");
            
            if (typeSelect.value === "ponctuel") {
                durationSelect.disabled = true;
                durationLabel.style.opacity = "0.5";
            }
        }

        // Set default language
        setLanguage('fr');

        // Messages de feedback
        successMessage = translations.fr.form.messages.success;
        errorMessage = translations.fr.form.messages.error;

        // Move the submission logic to a separate function
        function handleSubmit() {
            const typeSelect = document.getElementById("type");
            const durationSelect = document.getElementById("duration");
            
            // Validation côté client basique
            if (!validateFormData()) {
                alert(errorMessage);
                return;
            }
            
            const data = {
                name: document.getElementById("name").value,
                firstname: document.getElementById("firstname").value,
                contact: document.getElementById("contact").value,
                amount: document.getElementById("amount").value,
                type: typeSelect.value,
                duration: typeSelect.value === "ponctuel" ? "" : durationSelect.value
            };

            console.log("Données envoyées:", data);

            // Désactiver le bouton pendant l'envoi
            const submitBtn = document.getElementById("submit-btn");
            submitBtn.disabled = true;

            fetch("https://script.google.com/macros/s/AKfycbwOu3w-85UlBu9P9niuPabneWyuHej19KMeUmJ61nc0k8jdjfb-ksfqA1vCxtDspYj8mQ/exec", {
                method: "POST",
                mode: "no-cors",
                body: JSON.stringify(data),
                headers: {
                    "Content-Type": "application/json"
                },
            })
            .then(response => {
                // Avec no-cors, on ne peut pas vraiment vérifier le statut
                // mais on peut au moins vérifier si la requête a été envoyée
                if (response.type === 'opaque') {
                    console.log("Réponse reçue (opaque)");
                    alert(successMessage);
                    
                    // Reset form and restore defaults
                    document.getElementById("donForm").reset();
                    typeSelect.value = DEFAULT_TYPE;
                    durationSelect.disabled = false;
                    durationSelect.value = DEFAULT_DURATION;
                    document.getElementById("label-duration").style.opacity = "1";
                    lastDurationValue = DEFAULT_DURATION;
                } else {
                    throw new Error('Réponse inattendue');
                }
            })
            .catch(error => {
                console.error("Erreur:", error);
                alert(errorMessage);
            })
            .finally(() => {
                // Réactiver le bouton dans tous les cas
                submitBtn.disabled = false;
            });
        }

        // Ajouter cette fonction de validation
        function validateFormData() {
            const name = document.getElementById("name").value.trim();
            const firstname = document.getElementById("firstname").value.trim();
            const contact = document.getElementById("contact").value.trim();
            const amount = document.getElementById("amount").value;
            const type = document.getElementById("type").value;
            
            if (!name || !firstname || !contact || !amount || !type) {
                return false;
            }
            
            // Valider le montant
            const numAmount = Number(amount);
            if (isNaN(numAmount) || numAmount <= 0 || numAmount > 1000000) {
                return false;
            }
            
            // Valider le type et la durée
            if (type === "mensuel") {
                const duration = document.getElementById("duration").value;
                if (!duration) {
                    return false;
                }
            }
            
            return true;
        }

        // Au chargement initial de la page, après setLanguage('fr')
        window.addEventListener('load', function() {
            const typeSelect = document.getElementById("type");
            const durationSelect = document.getElementById("duration");
            
            typeSelect.value = DEFAULT_TYPE;
            durationSelect.value = DEFAULT_DURATION;
        });
    </script>
</body>
</html>
